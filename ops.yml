version: # Defines the used `ops.yml` schema version
  "1"
ops:
  - name: # Unique identifier for your op (required)
      gitlab
    public: true
    sourceCodeURL: "https://git.cto.ai/platform-solutions/ops/gitlab"
    description: # Short description for what your op does (required)
      A workflow for gitlab
    run: # Command that is executed when op is started ("npm start", "./start_script.sh", etc.) (required)
      node /ops/lib/index.js
    env:
      # Provide required environment variables for your op; to access, use the platform specific API, e.g. `process.env` for NodeJS
      # To use environment variables from the Host, use the $ prefix:
      - "USER=world"
      - "OPS_ACCESS_TOKEN"
      - "GITLAB_URL=$GITLAB_URL"
      - "GPG_KEY=$GPG_KEY"
      - "GPG_PASSPHRASE=$GPG_PASSPHRASE"
      - "GITLAB_TEST_TOKEN=$GITLAB_TEST_TOKEN"
      - "OP_NAME=$OP_NAME"
    src: # Whitelist files and folders to be included in the published op's WORKDIR
      - Dockerfile
      - src
      - package.json
      - .dockerignore
      - tsconfig.json
    mountCwd: # If set to `true`, binds the host's current working directory to `/cwd`; default value: `false` - working directory `/ops`
      true
    mountHome: # If set to `true`, binds the host's home directory to `/root`; default value: `false`
      false
    bind: # Bind additional volumes; trail the string accordingly to configure permissions for either read-only (:ro) or write (:w) access (example: ~/tmp:/root/tmp will bind lefthand directory in host to righthand directory in ops)
      - "/tmp:/tmp"
      - ~/.ssh:/root/.ssh
      - ~/.ops/cto.ai/gitlab:/root/.ops/cto.ai/gitlab
      - ~/.gitconfig:/root/.gitconfig
    port: # Map ports for your op container
      - 3000:3000
    help: # Configure the output for when your op is run with `op --help` or `op -h`
      usage: "Your first hello-world op"
      arguments:
        username: "Your username"
        email: "Your email"
      options:
        build: "Build flag"
        clear: "Clears"
